<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="{{ url_for('static', filename='homepage/style.css') }}">
    <title>ChaoNungSue - Home</title>
</head>
<body>
    <header class="navbar">
        <h2>ChaoNungSue</h2>
        <div class="search-container">
            <input type="text" id="searchInput" placeholder="ค้นหาหนังสือ..." />
            <i class="bx bx-search"></i>
        </div>
        <nav>
            <ul>
                <li><a href="#">Home</a></li>
                <li><a href="#">Skills</a></li>
                <li><a href="#">Contact</a></li>
            </ul>
        </nav>
        <button class="hire-btn" onclick="login()">Login</button>
    </header>

    <div id="hero-section">
        <div class="main">
            <h4>Welcome to ChaoNungSue</h4>
            <p class="title">Your Virtual Library</p>
            <p class="subtitle">Borrow books of your interests, or just take a look around!</p>
        </div>
    </div>

    <main class="content-container">

        <div class="borrowed-section">
            <h2>Your Borrowed Books</h2>
            <ul>
            {% if borrowed %}
                {% for book in borrowed %}
                    <li>{{ book[0] }} (Borrowed on {{ book[1] }})</li>
                {% endfor %}
            {% else %}
                <p>You haven't borrowed any books yet.</p>
            {% endif %}
            </ul>
        </div>
        <div class="section-header">
            <h2 id="displayTitle">Recommended Books</h2>
            <span id="resultCount" style="color: #666; font-size: 14px"></span>
        </div>

        <div class="book-grid">
            {% if rec %}
                {% for book in rec %}
                    <div class="book-card">
                        <img src="{{ book.img }}" alt="{{ book.title }}" class="book-image">
                        <h3>{{ book.title }}</h3>
                        <p>Category: {{ book.category }}</p>
                        <p>Rating: {{ book.rating }}</p>
                        <p>Tags: {{ book.tags }}</p>

                        {% if book.title in borrowed_titles %}
                            <form action="/return" method="POST">
                                <input type="hidden" name="book" value="{{ book.title }}">
                                <button type="submit" class="return-btn">Return</button>
                            </form>
                        {% else %}
                            <form action="/borrow" method="POST">
                                <input type="hidden" name="book" value="{{ book.title }}">
                                <button type="submit" class="borrow-btn">Borrow</button>
                            </form>
                        {% endif %}

                    </div>
                {% endfor %}
            {% else %}
                <p>No recommendations available.</p>
            {% endif %}
        </div>
    </main>
</body>
</html>
